<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <p class="testtg">это тест</p>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        function initApp() {
            let tg = window.Telegram.WebApp;
            console.log("initData:", tg.initData);

            if (!tg.initData || tg.initData === "") {
                console.log("Not from Telegram");
                document.querySelector('.testtg').innerHTML = "Ошибка: страница не запущена через Telegram.";
                return;
            }

            document.querySelector('.testtg').innerHTML = "Добро пожаловать: " + tg.initDataUnsafe.user.first_name + " " + tg.initDataUnsafe.user.last_name;

            if (tg.initDataUnsafe && tg.initDataUnsafe.user && tg.initDataUnsafe.user.isBot) {
                console.log("Bot detected");
                document.querySelector('.testtg').innerHTML = "Боты не поддерживаются.";
                return;
            }

            console.log("From Telegram");
        }

        initApp();
    </script>
</body>

</html>